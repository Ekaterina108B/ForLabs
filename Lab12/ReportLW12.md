# Отчет по лабораторной работе № 12
## по курсу "Фундаментальная информатика"

Студент группы М8О-108Б-23 Федорова Екатерина Васильевна

Работа выполнена 

Преподаватель: каф. 806 Севастьянов Виктор Сергеевич

1. **Тема**: Техника работы с целыми числами
2. **Цель работы**: 
3. **Задание (вариант №15)**:
   
Составить программу на языке Си в целом типе данных, которая для любых допустимых и корректно записанных чисел
этого типа в десятичном изображении, поступающих на стандартный ввод программы, выполняет указанное вариантом
действие над их значениями. Нумерация цифр в записи числа ведется справа налево, от младших разрядов к старшим,
начиная с нуля. Результатом действия над введённым числом является булевское значение в зависимости
от конкретного варианта, направляемое в стандартный вывод. Количество разных тестов для данной задачи должно
быть порядка 10. Концом пакета тестов является конец файла. В набор тестов должны быть включены разнообразные,
в том числе и простейшие тесты (одноциферные числа), крайние значения для данной задачи (например, 0),
тесты с легко предсказуемым результатом (0 + 0 = 0), отрицательные и очень большие числа.

Задание варианта: проверить, все ли цифры в смежных разрядах различны.

4. **Идея, метод, алгоритм решения задачи**: 

Данную задачу планирую решать с помощью состояний и побуквенного чтения ввода.

Каждое слово будет проходить проверку: число ли оно в 10СС или нет? Одновременно с этим, если представляется
возможным, проводятся рассчёты на проверку цифер разрядов. Если слово оказалось числом (нашли символ-разделитель)
и оно соответствует условию, то на экран выведется значение "True"; если не соответствует условию, то "False".
Если же проверяемое слово не число, то выводится уведомление "Incorrect input or not a number".
Так как вводимых чисел может быть несколько, чтобы выводимые ответы не сливались в единую строку, они разделены " | ".

Стоит учесть такие частные случаи, как наличие в числе незначимых нулей, которые не должны повлиять на вывод.
Также у чисел может быть знак: программа обязана корректно прочитать число и не вывести из-за него ответ 
"Incorrect input or not a number". При этом знак числа может случайно попасться внутри слова: тогда это следует
считать ошибкой ввода. 

Также программа должна корректно работать с концом ввода (файла).

5. **Сценарий выполнения работы**:

Для решения использую 4 различных состояния: NUMBER_CHECK, FIND, CONTINUE и CHECK_ZERO.



NUMBER_CHECK.

Начальное и "главное" состояние: проверяет, является ли читаемое слово числом. Если данная буква - цифра, то 
сразу проверяет на условия варианта. Для этого используется переменная `last_ch`, которая сохраняет 
значение предыдущей буквы. Если в начале слова знак числа ("+" или "-"), то пропускает его. Если в начале есть
незначимые нули, то переводит в состояние CHECK_ZERO. Если в слове встречается хоть одна буква - не цифра, то 
запоминается результат "Ошибка" и выполняется перевод в состояние FIND, переменная `last_ch` принимает значение
пробела. Если во время проверки оказывается, что какие-либо две цифры (смежных разрядов числа) одинаковы, 
то программа переходит в состояние CONTINUE и переменная `last_ch` принимает значение пробела. Если же слово 
заканчивается (нашли символ-разделитель), то программа запоминает результат "Правда" и переменная `last_ch` 
принимает значение пробела.



CHECK_ZERO.

Состояние, которое создано для корректной обработки незначащих нулей в начале предполагаемого числа.
Если встречается 0, то выполняется холостой шаг и читается следующая буква. Если попадается цифра, то 
состояние возвращается в NUMBER_CHECK. Если достигается конец слова, то в результат заносится значение "Правда"
(так как 00000 = 0) и состояние возвращается в NUMBER_CHECK. Если же встречается любоая другая буква, то
запоминается результат "Ошибка", состояние переводится в FIND.



FIND.

Состояние, созданное для пробега по оставшемуся слову до следующего. При встрече символа-разделителя 
переводит программу в состояние NUMBER_CHECK.



CONTINUE.

Состояние, созданное для остаточной проверки слова. Если нам уже известно, что в предполагаемом числе встречаются
две одинаковые цифры в смежных разрядах, нельзя сразу запоминать результат "Ложь", так как при дальнейшей проверке 
слова может оказаться, что оно - вовсе не число и нужно запомнить результат "Ошибка".



Важно уточнить, что все результаты хранятся в переменной `result` в виде числа, где 1 = "Ложь", 2 = "Правда", 
3 = "Ошибка". Каждый разряд обозначает свой результат проверки слова. Для записи используется конструкция
```
result = result * 10 + k
```
где k = 1, 2, 3.

| Входные данные | Выходные данные | Описание тестируемого случая                    |
|----------------|-----------------|-------------------------------------------------|
| 0              | True            | Проверка на корректность обработки конца файла  |
| 11             | False           |                                                 |
| а              | Incorrect input or not a number  |                                |
| 0 0\n0\t0      | True True True True  | Проверка на корректное распознавание символов-разделителей |
| 00 01 0011 +01 -0033 00+0023 0045hg | True True False True False Incorrect input or not a number Incorrect input or not a number |  Проверка на корректность работы с незначащими нулями |
| +0 -1 +99 -55 +6+8 -7+6 76j7 jhgfv | True True False False Incorrect input or not a number Incorrect input or not a number Incorrect input or not a number Incorrect input or not a number       | Проверка корректности работы со знаками числа и иными буквами |
| +0012345678901234567890123456789098765432123456789 | True            | Большие числа  |
| -1234567890098765432112345678900987654321123456789 | False           |                                                 |
| 012345577%87   | Incorrect input or not a number | Проверка вывода ошибки при возможном получении лжи|
| 122.45         | Incorrect input or not a number | Работа производится только с целыми числами       |

6. **Протокол**:

Программа:
```
#include <stdio.h>

typedef enum _kState
{
	FIND,
	NUMBER_CHECK,
	CONTINUE,
	CHECK_ZERO
} kState;

int is_digit(char literal){
    if (literal >= '0' && literal <= '9'){
        return 1;
    }
    return 0;
}

int is_delimiter(int literal){
    if (literal == ' ' || literal == ',' || literal == '\t' || literal == '\n'){
        return 1;
    }
    return 0;
}

int reverse(int num){
    int re_num = 0;
    while(num != 0){
        re_num = re_num * 10 + (num % 10);
        num = num / 10;
    }
    return re_num;
}

int is_sign(char literal){
    if (literal == '+' || literal == '-'){
        return 1;
    }
    return 0;
}

int main(void){
	char ch, last_ch = ' ';
	int result = 0;
	kState state = NUMBER_CHECK;
	while ((ch = getchar()) != EOF){
		switch (state)
		{
			case FIND:
			{
			    if (is_delimiter(ch)) state = NUMBER_CHECK;
			}
			break;
			
			case NUMBER_CHECK:
			{
			    if(is_digit(ch)){
			        if (ch == last_ch){
			            last_ch = ' ';
			            state = CONTINUE;
			            }
			        else if(ch == '0' && last_ch == ' '){
			            state = CHECK_ZERO;
			        }
			        else{
			            last_ch = ch;
			        }
			    }
			    else if(is_delimiter(ch)){
			        result = result * 10 + 2;
			        last_ch = ' ';
			    }
			    else if(is_sign(ch) && is_delimiter(last_ch)){
			        continue;
			    }
			    else{
			        result = result * 10 + 3;
			        state = FIND;
				last_ch = ' ';
			    }
			}
			break;
			
			case CONTINUE:
			{
			    if(is_digit(ch)){
			        continue;
			    }
			    else if(is_delimiter(ch)){
			        result = result * 10 + 1;
			        state = NUMBER_CHECK;
			    }
			    else{
			        result = result * 10 + 3;
			        state = FIND;
			    }
			}
			break;
			
			case CHECK_ZERO:
			{
			    if(ch == '0'){
			        continue;
			    }
			    else if(is_digit(ch)){
			        state = NUMBER_CHECK;
			        last_ch = ch;
			    }
			    else if(is_delimiter(ch)){
			        result = result * 10 + 2;
			        state = NUMBER_CHECK;
			    }
			    else{
			        result = result * 10 + 3;
			        state = FIND;
			    }
			}
			break;
		}
	}
	
	if(state == NUMBER_CHECK || state == CHECK_ZERO){
	    result = result * 10 + 2;
	}
	else if(state == CONTINUE){
	    result = result * 10 + 1;
	}
	result = reverse(result);
	printf("\n");
	while(result != 0){
        if(result % 10 == 1){
            printf("False | ");
        }
        else if (result % 10 == 2){
            printf("True | ");
        }
        else if (result % 10 == 3){
            printf("Incorrect input or not a number | ");
        }
        result = result / 10;
    }
    printf("\n");
    return 0;
}
```

Листинг:
```
moscow@moscow:~/Рабочий стол/For Labs/ForLabs/Lab12$ vim lab12.c
moscow@moscow:~/Рабочий стол/For Labs/ForLabs/Lab12$ gcc -std=c99 -Wall -pedantic lab12.c
moscow@moscow:~/Рабочий стол/For Labs/ForLabs/Lab12$ ./a.out
0
True | 
moscow@moscow:~/Рабочий стол/For Labs/ForLabs/Lab12$ ./a.out
11
False | 
moscow@moscow:~/Рабочий стол/For Labs/ForLabs/Lab12$ ./a.out
g
Incorrect input or not a number | 
moscow@moscow:~/Рабочий стол/For Labs/ForLabs/Lab12$ ./a.out
0 0
0	0
True | True | True | True | 
moscow@moscow:~/Рабочий стол/For Labs/ForLabs/Lab12$ ./a.out
00 01 0011 +01 -0033 00+0023 0045hg
True | True | False | True | False | Incorrect input or not a number | Incorrect input or not a number | 
moscow@moscow:~/Рабочий стол/For Labs/ForLabs/Lab12$ ./a.out
+0 -1 +99 -55 +6+8 -7+6 76j7 jhgfv
True | True | False | False | Incorrect input or not a number | Incorrect input or not a number | Incorrect input or not a number | Incorrect input or not a number | 
moscow@moscow:~/Рабочий стол/For Labs/ForLabs/Lab12$ ./a.out
+0012345678901234567890123456789098765432123456789
True | 
moscow@moscow:~/Рабочий стол/For Labs/ForLabs/Lab12$ ./a.out
-1234567890098765432112345678900987654321123456789
False | 
moscow@moscow:~/Рабочий стол/For Labs/ForLabs/Lab12$ ./a.out
012345577%87
Incorrect input or not a number | 
moscow@moscow:~/Рабочий стол/For Labs/ForLabs/Lab12$ ./a.out
122.45
Incorrect input or not a number | 
```

7. **Замечания автора** по существу работы: можно разнообразить вывод, типизировав ошибки. Можно решить иным способом.

8. **Выводы**:
Данная лабораторная работа очень понравилась. Моих скудных познаний хватило для её решения, так что программировать
оказалось в одно удовольствие. Если бы не время и не множество долгов, то я бы с удовольствием "поиграла"
с программой  и добавила разные типы ошибок: "введено не целое число", "введено слово, а не число", "число введено
с ошибкой". Во время данной лабораторной работы я закрепила полученную ранее информацию и синтаксис языка С и хорошо
провела время. Лишь написание отчёта заняло его слишком много.
