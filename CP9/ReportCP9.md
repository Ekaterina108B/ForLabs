# Отчет по лабораторной работе № 9
## по курсу "Фундаментальная информатика"

Студент группы М8О-108Б-23 Федорова Екатерина Васильевна

Работа выполнена 

Преподаватель: каф. 806 Севастьянов Виктор Сергеевич

1. **Тема**: инструментальные средства UNIX, алгоритмы и структуры данных.
2. **Цель работы**: Таблица. Сортировка и поиск.
3. **Задание (вариант №10-1)**:

Составить программу на языке Си с использованием процедур и функций для сортировки таблицы простым двухпоточным слиянием и двоичного поиска по ключу в таблице.
В качестве текста для записей таблицы взять изображение АЅCII-графики (группы 6-8). Каждый элемент таблицы, содержащий ключ и текст записи, распечатывать в отдельной строке.

*Структура таблицы*:
- тип ключа: целочисленный;
- длина ключа в байтах: 8;
- хранение данных и ключей: вместе;
- число элем. в таблице: 8-12.
 
4. **Идея, метод, алгоритм решения задачи**:

Файлы "table.c" и "table.h" представляют собой описание и реализацию некоторых функций для работы с таблицей в языке программирования C. 
1. Структура Table
- Структура Table представляет таблицу, состоящую из 50 строк, каждая строка имеет длину `STR_SIZE` символов.
- Table содержит также переменную size, которая хранит текущее количество элементов в таблице.

2. Функции:
- `CreateTable(Table t)`: Создание пустой таблицы.
- `ReadTable(FILE in, Table t)`: Чтение данных из файла и заполнение ими таблицы.
- `SizeTable(Table t)`: Возвращение количества строк в таблице.
- `PrintLine(void)`: Печать линии разделения.
- `PrintTable(Table t)`: Печать содержимого таблицы.
- `SearchByKey(Table t, int64_t key)`: Бинарный поиск элемента таблицы по ключу.
- `Copy(Table t)`: Создание копии таблицы.
- `Merge(Table t1, Table t2)`: Слияние двух отсортированных таблиц.
- `SortTable(Table t)`: Сортивка таблицы простым двухпоточным слиянием.
- `ReverseTable(Table t)`: Перевор таблицы.
- `ClearTable(Table t)` и `ClearLine(Table t, int i)`: Очищение таблицы и строки таблицы соответственно.
- `MixRandom(Table t)`: Перемешивание строк в таблице случайным образом.
- `SwapLineTable(Table t, int ln1, int ln2)`: Обмен двух строк местами в таблице.
- `DeleteTable(Table t)`: Удаление таблицы, освобождение памяти.

Основная программа находится в файле "cp9.c":
1. 'N' (New: добавление новой ASCII-графики)
- Пользователю предлагается ввести название файла с ASCII-графикой.
- Происходит очистка таблицы и проверка на успешное открытие файла.
- Если файл успешно считывается, то данные записываются в таблицу `tab`.
2. 'K' (Key: поиск по ключу)
- Если ASCII-графика не была считана, выводится сообщение об ошибке.
- Таблица сортируется, пользователю предлагается ввести ключ для поиска.
- Если ключ найден в таблице, выводится соответствующая строка.
3. 'S' (Sort: сортировка таблицы)
- Если ASCII-графика не была считана, выводится сообщение об ошибке.
- Таблица сортируется и выводится на экран.
4. 'R' (Reverse: реверс таблицы)
- Если ASCII-графика не была считана, выводится сообщение об ошибке.
- Таблица реверсируется и выводится на экран.
5. 'M' (Mix: перемешивание таблицы)
- Если ASCII-графика не была считана, выводится сообщение об ошибке.
- Строки в таблице перемешиваются и выводятся на экран.
6. 'C' (Count: подсчет строк в таблице)
- Если ASCII-графика не была считана, выводится сообщение об ошибке.
- Выводится количество строк в таблице.
7. 'P' (Paint: печать таблицы)
- Печатается содержимое таблицы.

В конце программы освобождается память, выделенная под таблицу `tab`, и выводится сообщение "До свидания!".

5. **Сценарий выполнения работы**:
```
moscow@moscow:~/Рабочий стол/For Labs/ForLabs/CP9$ make
gcc -std=c99 -pedantic -Wall -c table.c -o table.o
gcc -std=c99 -pedantic -Wall -o client cp9.c table.o
valgrind --leak-check=yes -s ./client
==10293== Memcheck, a memory error detector
==10293== Copyright (C) 2002-2017, and GNU GPL'd, by Julian Seward et al.
==10293== Using Valgrind-3.18.1 and LibVEX; rerun with -h for copyright info
==10293== Command: ./client
==10293== 
Запуск программы...

N для считывания новой ASCII-графики,
K для поиска по ключу,
S для сортировки таблицы,
R для реверса таблицы,
M для перемешивания,
C для подсчёта количества строк в ASCII-графике,
P для печати ASCII-графики,
Q для выхода.
n
Введите название файла с ASCII-графикой: cat.txt

N для считывания новой ASCII-графики,
K для поиска по ключу,
S для сортировки таблицы,
R для реверса таблицы,
M для перемешивания,
C для подсчёта количества строк в ASCII-графике,
P для печати ASCII-графики,
Q для выхода.
p
+-------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
|  Ключ |                          Значение                                                
+-------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
|     1 |                                                                                          
|     2 |                                                                                          
|     3 |                                                               ::::..                     
|     4 |                                                              .=*#####*=:.                
|     5 |                                                                 -#%%%%%%#*=.             
|     6 |                                                                  =#%%%%%%%%#-            
|     7 |                                                                   -*%%%%%%%%%-           
|     8 |                                                                    -*%%%%%%%%#:          
|     9 |                                                                     :=%%%%%%%%#          
|    10 |                                                                       +%%%%%%%%:         
|    11 |                  .--.              .:.                                -%%%%%%%%:         
|    12 |                  @@@@@*=====---=+#%@@=                                *%%%%%%%%.         
|    13 |                 -@@@@@@@@@@@@@@@@@@@@=                               -#%%%%%%%#          
|    14 |                .#@@@@@@@%%@@@@@@@%%@@@*                             :#%%%%%%%%=          
|    15 |               =%@@@@@@#==+*#@@@@#+++@@@*                           .#%%%%%%%%#           
|    16 |             :%@@@@@@@@%+=+++@@%%#++#@@@%=                         .#%%%%%%%%#-           
|    17 |             %@@@@@@@@@@@%%%@@@%%@@@@@@@@%++***********+=--:.     .*%%%%%%%+::            
|    18 |            -@@@@@@@@@@@@@@@@@@%%@@@@@@@%%######%%%%%%%%%%%%%%#+-:+%%%%%%#-               
|    19 |            =@@@@@@@@@@@@@@@@@@@@@@@@%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%*.                
|    20 |            -@@@@@@@@@@@@@@@@@@@@@%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%+                  
|    21 |            =%@@@@@@@@@@@@@@@@%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%#-                  
|    22 |            :#@@@@@@@@@@@@@@%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%+                  
|    23 |             *%@@@@@@@@@@@%%%%%%%%%%%%%%%%%%%%%%%%%#%%%%%%%%%#%%%%%%%%%+                  
|    24 |             .#%@@@@@@@@%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%=                  
|    25 |              :*%%@@@@@%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%+                  
|    26 |               .#%%@@@@%%%%%%%%%%%%%%%#%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%:                 
|    27 |                .#%%%%%%%%%%%%%%%%%%%##%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%*                 
|    28 |                 =#%%%%%%%%%%%%%%%%%%##%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%*.               
|    29 |                 -#%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%#=              
|    30 |                 :##%%%%%%@@@@%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%#+:             
|    31 |                   .:=%%%%@@@@@@@%%%%%%%%%%%%%%%%%%@@@@@@@%%@@@@@@@%%@%@@@@%:             
|    32 |                      :@@@@@@@@@@@@%###%%%%%%%%%%@@@@@@@####%@@@@@@@@@@@@@@@#             
|    33 |                       =@@@@@@@@@@-.....:::....-%@@@@@@-     :+*%@@@@%@@@@@@@:            
|    34 |                       .@@@@@@@@@+              -%@@@%:               .=%@@@@-            
|    35 |                       -=+%@%@@%=              -+*++=                    *@@@:            
|    36 |                          ====-                                           ...             
|    37 |                                                                                          

N для считывания новой ASCII-графики,
K для поиска по ключу,
S для сортировки таблицы,
R для реверса таблицы,
M для перемешивания,
C для подсчёта количества строк в ASCII-графике,
P для печати ASCII-графики,
Q для выхода.
r
+-------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
|  Ключ |                          Значение                                                
+-------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
|    37 |                                                                                          
|    36 |                          ====-                                           ...             
|    35 |                       -=+%@%@@%=              -+*++=                    *@@@:            
|    34 |                       .@@@@@@@@@+              -%@@@%:               .=%@@@@-            
|    33 |                       =@@@@@@@@@@-.....:::....-%@@@@@@-     :+*%@@@@%@@@@@@@:            
|    32 |                      :@@@@@@@@@@@@%###%%%%%%%%%%@@@@@@@####%@@@@@@@@@@@@@@@#             
|    31 |                   .:=%%%%@@@@@@@%%%%%%%%%%%%%%%%%%@@@@@@@%%@@@@@@@%%@%@@@@%:             
|    30 |                 :##%%%%%%@@@@%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%#+:             
|    29 |                 -#%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%#=              
|    28 |                 =#%%%%%%%%%%%%%%%%%%##%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%*.               
|    27 |                .#%%%%%%%%%%%%%%%%%%%##%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%*                 
|    26 |               .#%%@@@@%%%%%%%%%%%%%%%#%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%:                 
|    25 |              :*%%@@@@@%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%+                  
|    24 |             .#%@@@@@@@@%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%=                  
|    23 |             *%@@@@@@@@@@@%%%%%%%%%%%%%%%%%%%%%%%%%#%%%%%%%%%#%%%%%%%%%+                  
|    22 |            :#@@@@@@@@@@@@@@%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%+                  
|    21 |            =%@@@@@@@@@@@@@@@@%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%#-                  
|    20 |            -@@@@@@@@@@@@@@@@@@@@@%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%+                  
|    19 |            =@@@@@@@@@@@@@@@@@@@@@@@@%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%*.                
|    18 |            -@@@@@@@@@@@@@@@@@@%%@@@@@@@%%######%%%%%%%%%%%%%%#+-:+%%%%%%#-               
|    17 |             %@@@@@@@@@@@%%%@@@%%@@@@@@@@%++***********+=--:.     .*%%%%%%%+::            
|    16 |             :%@@@@@@@@%+=+++@@%%#++#@@@%=                         .#%%%%%%%%#-           
|    15 |               =%@@@@@@#==+*#@@@@#+++@@@*                           .#%%%%%%%%#           
|    14 |                .#@@@@@@@%%@@@@@@@%%@@@*                             :#%%%%%%%%=          
|    13 |                 -@@@@@@@@@@@@@@@@@@@@=                               -#%%%%%%%#          
|    12 |                  @@@@@*=====---=+#%@@=                                *%%%%%%%%.         
|    11 |                  .--.              .:.                                -%%%%%%%%:         
|    10 |                                                                       +%%%%%%%%:         
|     9 |                                                                     :=%%%%%%%%#          
|     8 |                                                                    -*%%%%%%%%#:          
|     7 |                                                                   -*%%%%%%%%%-           
|     6 |                                                                  =#%%%%%%%%#-            
|     5 |                                                                 -#%%%%%%#*=.             
|     4 |                                                              .=*#####*=:.                
|     3 |                                                               ::::..                     
|     2 |                                                                                          
|     1 |                                                                                          

N для считывания новой ASCII-графики,
K для поиска по ключу,
S для сортировки таблицы,
R для реверса таблицы,
M для перемешивания,
C для подсчёта количества строк в ASCII-графике,
P для печати ASCII-графики,
Q для выхода.
m
+-------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
|  Ключ |                          Значение                                                
+-------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
|    35 |                       -=+%@%@@%=              -+*++=                    *@@@:            
|     5 |                                                                 -#%%%%%%#*=.             
|    21 |            =%@@@@@@@@@@@@@@@@%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%#-                  
|    33 |                       =@@@@@@@@@@-.....:::....-%@@@@@@-     :+*%@@@@%@@@@@@@:            
|    27 |                .#%%%%%%%%%%%%%%%%%%%##%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%*                 
|     9 |                                                                     :=%%%%%%%%#          
|    30 |                 :##%%%%%%@@@@%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%#+:             
|    28 |                 =#%%%%%%%%%%%%%%%%%%##%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%*.               
|     4 |                                                              .=*#####*=:.                
|    22 |            :#@@@@@@@@@@@@@@%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%+                  
|    17 |             %@@@@@@@@@@@%%%@@@%%@@@@@@@@%++***********+=--:.     .*%%%%%%%+::            
|    12 |                  @@@@@*=====---=+#%@@=                                *%%%%%%%%.         
|    19 |            =@@@@@@@@@@@@@@@@@@@@@@@@%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%*.                
|    23 |             *%@@@@@@@@@@@%%%%%%%%%%%%%%%%%%%%%%%%%#%%%%%%%%%#%%%%%%%%%+                  
|    15 |               =%@@@@@@#==+*#@@@@#+++@@@*                           .#%%%%%%%%#           
|    37 |                                                                                          
|    34 |                       .@@@@@@@@@+              -%@@@%:               .=%@@@@-            
|    24 |             .#%@@@@@@@@%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%=                  
|    14 |                .#@@@@@@@%%@@@@@@@%%@@@*                             :#%%%%%%%%=          
|     1 |                                                                                          
|    26 |               .#%%@@@@%%%%%%%%%%%%%%%#%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%:                 
|    11 |                  .--.              .:.                                -%%%%%%%%:         
|    10 |                                                                       +%%%%%%%%:         
|    25 |              :*%%@@@@@%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%+                  
|     6 |                                                                  =#%%%%%%%%#-            
|     7 |                                                                   -*%%%%%%%%%-           
|    32 |                      :@@@@@@@@@@@@%###%%%%%%%%%%@@@@@@@####%@@@@@@@@@@@@@@@#             
|     2 |                                                                                          
|    29 |                 -#%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%#=              
|     3 |                                                               ::::..                     
|    16 |             :%@@@@@@@@%+=+++@@%%#++#@@@%=                         .#%%%%%%%%#-           
|    36 |                          ====-                                           ...             
|     8 |                                                                    -*%%%%%%%%#:          
|    31 |                   .:=%%%%@@@@@@@%%%%%%%%%%%%%%%%%%@@@@@@@%%@@@@@@@%%@%@@@@%:             
|    13 |                 -@@@@@@@@@@@@@@@@@@@@=                               -#%%%%%%%#          
|    18 |            -@@@@@@@@@@@@@@@@@@%%@@@@@@@%%######%%%%%%%%%%%%%%#+-:+%%%%%%#-               
|    20 |            -@@@@@@@@@@@@@@@@@@@@@%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%+                  

N для считывания новой ASCII-графики,
K для поиска по ключу,
S для сортировки таблицы,
R для реверса таблицы,
M для перемешивания,
C для подсчёта количества строк в ASCII-графике,
P для печати ASCII-графики,
Q для выхода.
c
В данном файле с ASCII-графикой 37 строк.

N для считывания новой ASCII-графики,
K для поиска по ключу,
S для сортировки таблицы,
R для реверса таблицы,
M для перемешивания,
C для подсчёта количества строк в ASCII-графике,
P для печати ASCII-графики,
Q для выхода.
m
+-------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
|  Ключ |                          Значение                                                
+-------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
|    26 |               .#%%@@@@%%%%%%%%%%%%%%%#%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%:                 
|     3 |                                                               ::::..                     
|    15 |               =%@@@@@@#==+*#@@@@#+++@@@*                           .#%%%%%%%%#           
|    19 |            =@@@@@@@@@@@@@@@@@@@@@@@@%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%*.                
|     6 |                                                                  =#%%%%%%%%#-            
|    16 |             :%@@@@@@@@%+=+++@@%%#++#@@@%=                         .#%%%%%%%%#-           
|    35 |                       -=+%@%@@%=              -+*++=                    *@@@:            
|    10 |                                                                       +%%%%%%%%:         
|    25 |              :*%%@@@@@%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%+                  
|     2 |                                                                                          
|    29 |                 -#%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%#=              
|    18 |            -@@@@@@@@@@@@@@@@@@%%@@@@@@@%%######%%%%%%%%%%%%%%#+-:+%%%%%%#-               
|    37 |                                                                                          
|     4 |                                                              .=*#####*=:.                
|    14 |                .#@@@@@@@%%@@@@@@@%%@@@*                             :#%%%%%%%%=          
|    17 |             %@@@@@@@@@@@%%%@@@%%@@@@@@@@%++***********+=--:.     .*%%%%%%%+::            
|    27 |                .#%%%%%%%%%%%%%%%%%%%##%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%*                 
|     5 |                                                                 -#%%%%%%#*=.             
|    34 |                       .@@@@@@@@@+              -%@@@%:               .=%@@@@-            
|    36 |                          ====-                                           ...             
|    13 |                 -@@@@@@@@@@@@@@@@@@@@=                               -#%%%%%%%#          
|    22 |            :#@@@@@@@@@@@@@@%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%+                  
|     7 |                                                                   -*%%%%%%%%%-           
|    30 |                 :##%%%%%%@@@@%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%#+:             
|    32 |                      :@@@@@@@@@@@@%###%%%%%%%%%%@@@@@@@####%@@@@@@@@@@@@@@@#             
|    12 |                  @@@@@*=====---=+#%@@=                                *%%%%%%%%.         
|     8 |                                                                    -*%%%%%%%%#:          
|    23 |             *%@@@@@@@@@@@%%%%%%%%%%%%%%%%%%%%%%%%%#%%%%%%%%%#%%%%%%%%%+                  
|    21 |            =%@@@@@@@@@@@@@@@@%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%#-                  
|    20 |            -@@@@@@@@@@@@@@@@@@@@@%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%+                  
|    33 |                       =@@@@@@@@@@-.....:::....-%@@@@@@-     :+*%@@@@%@@@@@@@:            
|     1 |                                                                                          
|    28 |                 =#%%%%%%%%%%%%%%%%%%##%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%*.               
|    11 |                  .--.              .:.                                -%%%%%%%%:         
|    24 |             .#%@@@@@@@@%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%=                  
|     9 |                                                                     :=%%%%%%%%#          
|    31 |                   .:=%%%%@@@@@@@%%%%%%%%%%%%%%%%%%@@@@@@@%%@@@@@@@%%@%@@@@%:             

N для считывания новой ASCII-графики,
K для поиска по ключу,
S для сортировки таблицы,
R для реверса таблицы,
M для перемешивания,
C для подсчёта количества строк в ASCII-графике,
P для печати ASCII-графики,
Q для выхода.
s
+-------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
|  Ключ |                          Значение                                                
+-------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
|     1 |                                                                                          
|     2 |                                                                                          
|     3 |                                                               ::::..                     
|     4 |                                                              .=*#####*=:.                
|     5 |                                                                 -#%%%%%%#*=.             
|     6 |                                                                  =#%%%%%%%%#-            
|     7 |                                                                   -*%%%%%%%%%-           
|     8 |                                                                    -*%%%%%%%%#:          
|     9 |                                                                     :=%%%%%%%%#          
|    10 |                                                                       +%%%%%%%%:         
|    11 |                  .--.              .:.                                -%%%%%%%%:         
|    12 |                  @@@@@*=====---=+#%@@=                                *%%%%%%%%.         
|    13 |                 -@@@@@@@@@@@@@@@@@@@@=                               -#%%%%%%%#          
|    14 |                .#@@@@@@@%%@@@@@@@%%@@@*                             :#%%%%%%%%=          
|    15 |               =%@@@@@@#==+*#@@@@#+++@@@*                           .#%%%%%%%%#           
|    16 |             :%@@@@@@@@%+=+++@@%%#++#@@@%=                         .#%%%%%%%%#-           
|    17 |             %@@@@@@@@@@@%%%@@@%%@@@@@@@@%++***********+=--:.     .*%%%%%%%+::            
|    18 |            -@@@@@@@@@@@@@@@@@@%%@@@@@@@%%######%%%%%%%%%%%%%%#+-:+%%%%%%#-               
|    19 |            =@@@@@@@@@@@@@@@@@@@@@@@@%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%*.                
|    20 |            -@@@@@@@@@@@@@@@@@@@@@%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%+                  
|    21 |            =%@@@@@@@@@@@@@@@@%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%#-                  
|    22 |            :#@@@@@@@@@@@@@@%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%+                  
|    23 |             *%@@@@@@@@@@@%%%%%%%%%%%%%%%%%%%%%%%%%#%%%%%%%%%#%%%%%%%%%+                  
|    24 |             .#%@@@@@@@@%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%=                  
|    25 |              :*%%@@@@@%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%+                  
|    26 |               .#%%@@@@%%%%%%%%%%%%%%%#%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%:                 
|    27 |                .#%%%%%%%%%%%%%%%%%%%##%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%*                 
|    28 |                 =#%%%%%%%%%%%%%%%%%%##%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%*.               
|    29 |                 -#%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%#=              
|    30 |                 :##%%%%%%@@@@%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%#+:             
|    31 |                   .:=%%%%@@@@@@@%%%%%%%%%%%%%%%%%%@@@@@@@%%@@@@@@@%%@%@@@@%:             
|    32 |                      :@@@@@@@@@@@@%###%%%%%%%%%%@@@@@@@####%@@@@@@@@@@@@@@@#             
|    33 |                       =@@@@@@@@@@-.....:::....-%@@@@@@-     :+*%@@@@%@@@@@@@:            
|    34 |                       .@@@@@@@@@+              -%@@@%:               .=%@@@@-            
|    35 |                       -=+%@%@@%=              -+*++=                    *@@@:            
|    36 |                          ====-                                           ...             
|    37 |                                                                                          

N для считывания новой ASCII-графики,
K для поиска по ключу,
S для сортировки таблицы,
R для реверса таблицы,
M для перемешивания,
C для подсчёта количества строк в ASCII-графике,
P для печати ASCII-графики,
Q для выхода.
k
Введите ключ: 20
Найденная строка:             -@@@@@@@@@@@@@@@@@@@@@%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%+                  

N для считывания новой ASCII-графики,
K для поиска по ключу,
S для сортировки таблицы,
R для реверса таблицы,
M для перемешивания,
C для подсчёта количества строк в ASCII-графике,
P для печати ASCII-графики,
Q для выхода.
k
Введите ключ: 0
Ключ отсутствует в таблице.

N для считывания новой ASCII-графики,
K для поиска по ключу,
S для сортировки таблицы,
R для реверса таблицы,
M для перемешивания,
C для подсчёта количества строк в ASCII-графике,
P для печати ASCII-графики,
Q для выхода.
k
Введите ключ: 100
Ключ отсутствует в таблице.

N для считывания новой ASCII-графики,
K для поиска по ключу,
S для сортировки таблицы,
R для реверса таблицы,
M для перемешивания,
C для подсчёта количества строк в ASCII-графике,
P для печати ASCII-графики,
Q для выхода.
n
Введите название файла с ASCII-графикой: logo.txt

N для считывания новой ASCII-графики,
K для поиска по ключу,
S для сортировки таблицы,
R для реверса таблицы,
M для перемешивания,
C для подсчёта количества строк в ASCII-графике,
P для печати ASCII-графики,
Q для выхода.
p
+-------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
|  Ключ |                          Значение                                                
+-------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
|     1 |##########################################################################################
|     3 |##########################################################################################
|     4 |##########################################################################################
|    25 |########-   *########.   =**+.   +##*=++*+=   .##*    -=++.   *##+   .########*   -#######
|     9 |####################*-    .-+#################################*-.    -*###################
|    10 |##################*:    -+#######################################*-    :*#################
|    12 |###############=    -#################################################=    =##############
|    13 |##############-   :*###################################################*:   -#############
|    42 |#######################################**+++++++++***#####################################
|    43 |##########################################################################################
|    17 |##########-   +##################################################*....######+   :#########
|    18 |#########*   :###################################################+    #######-   +########
|    19 |#########:   *############**############****######***######***###*    ########   .########
|    20 |########*   :#########+:      .=#####+:       +##=   -####:   *##*   .########-   *#######
|    21 |########=   +########:   :==-    *##+   .===-:###=   -####:   *##*   .########+   =#######
|    22 |########-   ########=   -####*   .##+   .-+*#####=   -####:   *###   .#########   :#######
|    24 |########:   ########-   =#####   .#####**+-   .##+   -####:   *###****#########   :#######
|     2 |##########################################################################################
|    28 |#########=   =###############################################################=   -########
|    16 |###########.   *###########################################################*   .##########
|    30 |##########*   .############################################################*.   *#########
|    31 |###########+   .##########################################################*.   +##########
|    32 |############+   .*#######################################################*.   =###########
|    33 |#############*.   =#####################################################=    +############
|    35 |################+.   :*#############################################*:    =###############
|    37 |###################*=    .-*###################################*-.    -*##################
|    38 |#####################*+:    .:=*###########################*=-.    :=*####################
|    29 |##########.   *#############################################################*    #########
|    40 |###########################*+=:        ..::-----::..        :-+*##########################
|    41 |################################*+=-:.               ..:-+*###############################
|    11 |#################-    =*############################################=    -*###############
|    44 |##########################################################################################
|    45 |##########################################################################################
|     6 |#############################*=-.            .            .-=*############################
|    27 |#########    ###########*+++++*#####**+===+*########*++====+**###*++++########.   ########
|    14 |#############:   =#######################################################=   .*###########
|    15 |############.   +#########################################################*   .###########
|    23 |########:   ########:   +#####    ###=.      :*##=   -####:   *###   :#########   :#######
|    34 |###############:   .*#################################################*:   .*#############
|    39 |########################*=:      :-+*#################*+-:      :=*#######################
|    26 |########+   -#########-        :*###-        -*###*:          *##+    ########=   +#######
|     5 |##################################*+=--:...     ...:--=+*#################################
|     7 |##########################+:      .:-=++*#########**+=-:.      :+#########################
|     8 |#######################+:     :=+*#######################*+=:     :=######################
|    36 |##################=    :+#########################################+:    -*################

N для считывания новой ASCII-графики,
K для поиска по ключу,
S для сортировки таблицы,
R для реверса таблицы,
M для перемешивания,
C для подсчёта количества строк в ASCII-графике,
P для печати ASCII-графики,
Q для выхода.
k
Введите ключ: 6
Найденная строка: #############################*=-.            .            .-=*############################

N для считывания новой ASCII-графики,
K для поиска по ключу,
S для сортировки таблицы,
R для реверса таблицы,
M для перемешивания,
C для подсчёта количества строк в ASCII-графике,
P для печати ASCII-графики,
Q для выхода.
p
+-------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
|  Ключ |                          Значение                                                
+-------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
|     1 |##########################################################################################
|     2 |##########################################################################################
|     3 |##########################################################################################
|     4 |##########################################################################################
|     5 |##################################*+=--:...     ...:--=+*#################################
|     6 |#############################*=-.            .            .-=*############################
|     7 |##########################+:      .:-=++*#########**+=-:.      :+#########################
|     8 |#######################+:     :=+*#######################*+=:     :=######################
|     9 |####################*-    .-+#################################*-.    -*###################
|    10 |##################*:    -+#######################################*-    :*#################
|    11 |#################-    =*############################################=    -*###############
|    12 |###############=    -#################################################=    =##############
|    13 |##############-   :*###################################################*:   -#############
|    14 |#############:   =#######################################################=   .*###########
|    15 |############.   +#########################################################*   .###########
|    16 |###########.   *###########################################################*   .##########
|    17 |##########-   +##################################################*....######+   :#########
|    18 |#########*   :###################################################+    #######-   +########
|    19 |#########:   *############**############****######***######***###*    ########   .########
|    20 |########*   :#########+:      .=#####+:       +##=   -####:   *##*   .########-   *#######
|    21 |########=   +########:   :==-    *##+   .===-:###=   -####:   *##*   .########+   =#######
|    22 |########-   ########=   -####*   .##+   .-+*#####=   -####:   *###   .#########   :#######
|    23 |########:   ########:   +#####    ###=.      :*##=   -####:   *###   :#########   :#######
|    24 |########:   ########-   =#####   .#####**+-   .##+   -####:   *###****#########   :#######
|    25 |########-   *########.   =**+.   +##*=++*+=   .##*    -=++.   *##+   .########*   -#######
|    26 |########+   -#########-        :*###-        -*###*:          *##+    ########=   +#######
|    27 |#########    ###########*+++++*#####**+===+*########*++====+**###*++++########.   ########
|    28 |#########=   =###############################################################=   -########
|    29 |##########.   *#############################################################*    #########
|    30 |##########*   .############################################################*.   *#########
|    31 |###########+   .##########################################################*.   +##########
|    32 |############+   .*#######################################################*.   =###########
|    33 |#############*.   =#####################################################=    +############
|    34 |###############:   .*#################################################*:   .*#############
|    35 |################+.   :*#############################################*:    =###############
|    36 |##################=    :+#########################################+:    -*################
|    37 |###################*=    .-*###################################*-.    -*##################
|    38 |#####################*+:    .:=*###########################*=-.    :=*####################
|    39 |########################*=:      :-+*#################*+-:      :=*#######################
|    40 |###########################*+=:        ..::-----::..        :-+*##########################
|    41 |################################*+=-:.               ..:-+*###############################
|    42 |#######################################**+++++++++***#####################################
|    43 |##########################################################################################
|    44 |##########################################################################################
|    45 |##########################################################################################

N для считывания новой ASCII-графики,
K для поиска по ключу,
S для сортировки таблицы,
R для реверса таблицы,
M для перемешивания,
C для подсчёта количества строк в ASCII-графике,
P для печати ASCII-графики,
Q для выхода.
c
В данном файле с ASCII-графикой 45 строк.

N для считывания новой ASCII-графики,
K для поиска по ключу,
S для сортировки таблицы,
R для реверса таблицы,
M для перемешивания,
C для подсчёта количества строк в ASCII-графике,
P для печати ASCII-графики,
Q для выхода.
n
Введите название файла с ASCII-графикой: sdh
I/O ERROR: ошибка открытия файла.

N для считывания новой ASCII-графики,
K для поиска по ключу,
S для сортировки таблицы,
R для реверса таблицы,
M для перемешивания,
C для подсчёта количества строк в ASCII-графике,
P для печати ASCII-графики,
Q для выхода.
p
Не указан файл с ASCII-графикой.

N для считывания новой ASCII-графики,
K для поиска по ключу,
S для сортировки таблицы,
R для реверса таблицы,
M для перемешивания,
C для подсчёта количества строк в ASCII-графике,
P для печати ASCII-графики,
Q для выхода.
q

До свидания!
==10293== 
==10293== HEAP SUMMARY:
==10293==     in use at exit: 0 bytes in 0 blocks
==10293==   total heap usage: 572 allocs, 572 frees, 7,245,916 bytes allocated
==10293== 
==10293== All heap blocks were freed -- no leaks are possible
==10293== 
==10293== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
```
6. **Протокол**: Сюда вставляем листинг программы, если есть + примеры запуска.

Файл "table.h":
```
#ifndef _TABLE_H_
#define _TABLE_H_

#include <stdbool.h>
#include <stdint.h>

#define STR_SIZE 256
#define MAX_THREADS 2

typedef struct {
    char data[50][STR_SIZE];
    int size;
} Table;

void CreateTable(Table* t);
bool ReadTable(FILE* in, Table* t);
int SizeTable(Table* t);
void PrintLine(void);
void PrintTable(Table* t);
int SearchByKey(Table* t, int64_t key);
Table* Copy(Table *t);
void Merge(Table* t1, Table* t2);
Table* SortTable(Table* t);
void ReverseTable(Table* t);
void ClearTable(Table*t);
void ClearLine(Table* t, int i);
void MixRandom(Table* t);
void SwapLineTable(Table* t, int ln1, int ln2);
void DeleteTable(Table* t);

#endif
```

Файл "table.c":
```
#include <stdio.h>
#include <stdbool.h>
#include <stdint.h>
#include <stdlib.h>
#include <string.h>
#include <pthread.h>
#include <ctype.h>
#include <time.h>

#include "table.h"

void CreateTable(Table* t){
    t->size = 0;
}

bool ReadTable(FILE* in, Table* t){
    t->size = 0;
    while (fgets(t->data[t->size], sizeof(t->data[t->size]), in) != NULL){
        if (ferror(in)) {
            return false;
        }
        t->size++;
    }
    return true;
}

int SizeTable(Table* t){
    return t->size;
}

void PrintLine(void){
    for (int i = 0; i<180; i++){
        printf("-");
    }
    printf("\n");
}

void PrintTable(Table* t){
    printf("+-------+");
    PrintLine();
    printf("|  Ключ |                          Значение                                                \n");
    printf("+-------+");
    PrintLine();
    for (int i=0; i < t->size; i++){
        int index = 0;
        int64_t key;
        sscanf(&(t->data[i][0]), "%ld", &key);
        while (isspace(t->data[i][index])){ index++; }
        while (isdigit(t->data[i][index])){ index++; }
        printf("| %5ld |%s", key, &(t->data[i][index]));
    }
}

int SearchByKey(Table* t, int64_t key){
    int left = 0;
    int right = SizeTable(t) - 1;
    int mid;
    int64_t key_m;
    
    while (left <= right){
        mid = (left + right) / 2;
        sscanf(&(t->data[mid][0]), "%ld", &key_m);
        if(key_m == key){
            return mid;
        } else if (key_m > key){
            right = mid - 1;
        } else {
            left = mid + 1;
        }
    } 
    return -1;
}

Table* Copy(Table *t){
    Table* res = (Table*)malloc(sizeof(Table));
    CreateTable(res);
    for(int i = 0; i < SizeTable(t); i++){
        strcpy(res->data[i], t->data[i]);
    }
    res->size = t->size;
    return res;
}

void Merge(Table* t1, Table* t2){
    Table* tab = Copy(t1);
    ClearTable(t1);
    int it = 0;
    int i2 = 0;
    int i1 = 0;
    int64_t keyt = 0, key2 = 0;
    while(it < SizeTable(tab) && i2 < SizeTable(t2)){
        sscanf(&(tab->data[it][0]), "%ld", &keyt);
        sscanf(&(t2->data[i2][0]), "%ld", &key2);
        if (keyt <= key2){
            strcpy(t1->data[i1], tab->data[it]);
            it++;
        } else {
            strcpy(t1->data[i1], t2->data[i2]);
            i2++;
        }
        i1++;
    }
    while(it < SizeTable(tab)){
        strcpy(t1->data[i1], tab->data[it]);
        it++;
        i1++;
    }
    while(i2 < SizeTable(t2)){
        strcpy(t1->data[i1], t2->data[i2]);
        i2++;
        i1++;
    }
    t1->size = SizeTable(tab) + SizeTable(t2);
    
    DeleteTable(tab);
    DeleteTable(t2);
}

Table* SortTable(Table* t){
    if(SizeTable(t) <= 1){
        return t;
    }
    
    Table* left = (Table*)malloc(sizeof(Table));
    Table* right = (Table*)malloc(sizeof(Table));
    CreateTable(left);
    CreateTable(right);
    int middle = SizeTable(t) / 2;
    
    for(int i=0; i<middle; i++){
        strcpy(left->data[i], t->data[i]);
    }
    left->size = middle;
    for(int i=middle; i < SizeTable(t); i++){
        strcpy(right->data[i-middle], t->data[i]);
    }
    right->size = SizeTable(t) - middle;
    
    left = SortTable(left);
    right = SortTable(right);
    Merge(left, right);
    
    DeleteTable(t);
    return left;
}

void ReverseTable(Table* t){
    int left = 0;
    int right = SizeTable(t) - 1;
    char bf[STR_SIZE];
    
    while (left < right){
        strcpy(bf, t->data[left]);
        ClearLine(t, left);
        strcpy(t->data[left], t->data[right]);
        ClearLine(t, right);
        strcpy(t->data[right], bf);
        for (int j = 0; j < STR_SIZE; j++){
            bf[j] = '\0';
        }
        right--;
        left++;
    }
}

void ClearTable(Table* t){
    for (int i = 0; i < t->size; i++){
        int len = strlen(t->data[i]);
        for (int j = 0; j < len; j++){
            t->data[i][j] = '\0';
        }
    }
    t->size = 0;
}

void ClearLine(Table* t, int i){
    int len = strlen(t->data[i]);
    for (int j = 0; j < len; j++){
        t->data[i][j] = '\0';
    }
}

void MixRandom(Table* t){
    int ln2;
    int s = SizeTable(t);
    srand(time(NULL));
    for (int ln1 = 0; ln1 < s; ln1++){
        ln2 = rand() % s;
        if (ln1 == ln2){
            continue;
        } else {
            SwapLineTable(t, ln1, ln2);
        }
    }
}

void SwapLineTable(Table* t, int ln1, int ln2){
    char bf[STR_SIZE];
    strcpy(bf, t->data[ln1]);
    ClearLine(t, ln1);
    strcpy(t->data[ln1], t->data[ln2]);
    ClearLine(t, ln2);
    strcpy(t->data[ln2], bf);
}

void DeleteTable(Table* t){
    free(t);
}
```

Файл "cp9.c"
```
#include <stdio.h>
#include <stdbool.h>
#include <stdint.h>
#include <stdlib.h>
#include <string.h>
#include <pthread.h>
#include <ctype.h>
#include <time.h>

#include "table.h"

int main(void){
    printf("Запуск программы...\n");
    char stat = 'e';
    bool flag_is_the_table_read = false;
    Table* tab = (Table*)malloc(sizeof(Table));
    CreateTable(tab);
    
    while ((stat != 'Q') && (stat != 'q')) {
        printf("\nN для считывания новой ASCII-графики,\nK для поиска по ключу,\nS для сортировки таблицы,\nR для реверса таблицы,\nM для перемешивания,\nC для подсчёта количества строк в ASCII-графике,\nP для печати ASCII-графики,\nQ для выхода.\n");
        scanf(" %c", &stat);
        
        switch(stat){
            
            case 'N':
            case 'n':
            {
                char name_file[STR_SIZE];
                ClearTable(tab);
                flag_is_the_table_read = false;
                printf("Введите название файла с ASCII-графикой: ");
                scanf("%s", &name_file[0]);
                FILE* in = fopen(name_file, "r");
                if (!in){
        	    printf("I/O ERROR: ошибка открытия файла.\n");
        	    break;
        	}
        	if (!ReadTable(in, tab)){
        	    printf("I/O ERROR: ошибка чтения файла.\n");
        	    fclose(in);
        	    break;
        	}
        	flag_is_the_table_read = true;
        	fclose(in);
            }
            break;
            
            case 'K':
            case 'k':
            {
                if (!flag_is_the_table_read){
                    printf("Не указан файл с ASCII-графикой.\n");
                    break;
                }
                tab = SortTable(tab);
                int64_t key;
                printf("Введите ключ: ");
                scanf("%ld", &key);
                int i = SearchByKey(tab, key);
                if (i == -1){
                    printf("Ключ отсутствует в таблице.\n");
                } else {
                    int index = 0;
            	    while (isspace(tab->data[i][index])){ index++; }
            	    while (isdigit(tab->data[i][index])){ index++; }
                    printf("Найденная строка: %s", &(tab->data[i][index]));
                }
            }
            break;
            
            case 'S':
            case 's':
            {
                if (!flag_is_the_table_read){
                    printf("Не указан файл с ASCII-графикой.\n");
                    break;
                }
                tab = SortTable(tab);
                PrintTable(tab);
            }
            break;
            
            case 'R':
            case 'r':
            {
                if (!flag_is_the_table_read){
                    printf("Не указан файл с ASCII-графикой.\n");
                    break;
                }
                ReverseTable(tab);
                PrintTable(tab);
                
            }
            break;
            
            case 'M':
            case 'm':
            {
                if (!flag_is_the_table_read){
                    printf("Не указан файл с ASCII-графикой.\n");
                    break;
                }
                MixRandom(tab);
                PrintTable(tab);
            }
            break;
            
            case 'C':
            case 'c':
            {
                if (!flag_is_the_table_read){
                    printf("Не указан файл с ASCII-графикой.\n");
                    break;
                }
                printf("В данном файле с ASCII-графикой %d строк.\n", SizeTable(tab));
            }
            break;
            
            case 'P':
            case 'p':
            {
                if (!flag_is_the_table_read){
                    printf("Не указан файл с ASCII-графикой.\n");
                    break;
                }
                PrintTable(tab);
            }
            break;
        }
    }
    
    DeleteTable(tab);
    printf("\nДо свидания!\n");
    
    return 0;
}
```

7. **Замечания автора** по существу работы: -.
8. **Выводы**: ох уж этот Н.Вирт. Я потратила непростительно много времени от недоумения, какая именно сортировка от меня требуется, пока не спросила у преподавателя лично.
Не могу оценить данную лабораторную (курсовую) работу однозначно, так как во время её выполнения заболела и отложила на неделю, а, отдохнув и вылечившись, доделала достаточно быстро.
Немного затронула тему потоков в языке Си, вспомнила, как работать со структурами и строками, прикоснулась к генератору псевдослучайных чисел. Неделю назад я бы прокляла работу, но сейчас
она мне кажется ввполне хорошей. Создание ASCII-графики для тестов -- отдельное удовольствие.
